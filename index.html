<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Trá»‘ng Ä‘iá»‡n tá»­ online - Drum Machine</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="header-row">
      <h1 class="title">Tri's Drum Player</h1>
      <div class="header-actions">
        <a href="guide.html" class="btn btn-ghost btn-sm" title="HÆ°á»›ng dáº«n" data-i18n="guide" target="_blank" rel="noopener">HÆ°á»›ng dáº«n</a>
        <div class="lang-switcher">
          <button type="button" class="btn btn-ghost btn-sm lang-btn" data-lang="vi" title="Tiáº¿ng Viá»‡t">VI</button>
          <button type="button" class="btn btn-ghost btn-sm lang-btn" data-lang="en" title="English">EN</button>
        </div>
        <div id="authArea" class="auth-area">
          <div id="loginPrompt" class="login-prompt">
            <button id="loginBtn" class="btn btn-ghost" data-i18n="loginGoogle">ÄÄƒng nháº­p Google</button>
            <span class="login-tooltip" id="loginTooltip" data-i18n="loginTooltip">ÄÄƒng nháº­p Ä‘á»ƒ cÃ³ thá»ƒ táº¡o Ä‘iá»‡u trá»‘ng cho riÃªng mÃ¬nh vÃ  chia sáº» vá»›i ngÆ°á»i khÃ¡c</span>
          </div>
          <div id="userArea" class="user-area" style="display:none">
            <img id="userAvatar" class="user-avatar" alt="">
            <span id="userName" class="user-name"></span>
            <button id="logoutBtn" class="btn btn-ghost btn-sm" data-i18n="logout">ÄÄƒng xuáº¥t</button>
          </div>
        </div>
      </div>
    </div>

    <div class="controls">
      <div class="controls-row controls-row-actions">
        <button id="rhythmBtn" class="btn btn-browse" data-i18n="rhythmPresets">Äiá»‡u máº«u</button>
        <button id="chainBtn" class="btn btn-info" data-i18n="chain">Chain</button>
        <button id="myPresetsBtn" class="btn btn-info" style="display:none" data-i18n="myPresets">Äiá»‡u cá»§a tÃ´i</button>
        <button id="randomBtn" class="btn btn-ghost" data-i18n="random">Random</button>
        <button id="clearBtn" class="btn btn-danger" data-i18n="clear">XoÃ¡</button>
      </div>
      <div class="controls-row controls-row-copy">
        <button id="copyUrlBtn" class="btn btn-success btn-copy" data-i18n="copyLink">Sao chÃ©p link share</button>
        <button id="saveRhythmBtn" class="btn btn-download" data-i18n="download">Táº£i xuá»‘ng</button>
        <button id="loadFileBtn" class="btn btn-upload" data-i18n="loadFile">Táº£i file</button>
        <input type="file" id="loadFileInput" accept=".yaml,.yml,.json" style="display:none">
        <span id="copyStatus" class="copy-status"></span>
      </div>
    </div>

    <div class="current-preset-section">
      <span id="currentPresetName" class="current-preset-name" data-i18n-empty="currentPresetEmpty" data-i18n-before="currentPresetLabel"></span>
    </div>

    <div class="sequencer-transport">
      <div class="controls-row controls-row-primary">
        <button id="playBtn" class="btn btn-play" aria-label="PhÃ¡t">
          <span class="play-icon">â–¶</span>
        </button>
        <div class="tempo-control">
          <label for="bpm" data-i18n="bpm">BPM</label>
          <input type="number" id="bpm" value="90" min="40" max="240" step="1">
        </div>
        <div class="time-signature-control">
          <label for="timeSignature" data-i18n="timeSig">Nhá»‹p</label>
          <select id="timeSignature">
            <option value="4/4">4/4</option>
            <option value="3/4">3/4</option>
            <option value="12/8">12/8</option>
          </select>
        </div>
        <label class="metronome-option">
          <input type="checkbox" id="metronomeCheck" aria-label="Click">
          <span data-i18n="metronome">Metronome</span>
        </label>
        <div class="sound-control">
          <label for="soundSet" data-i18n="soundSet">Bá»™ tiáº¿ng</label>
          <select id="soundSet">
            <option value="standard">standard</option>
          </select>
        </div>
      </div>
    </div>

    <div class="sequencer">
      <div class="grid-header">
        <div class="instrument-label empty"></div>
        <div class="volume-label" data-i18n="volume">Vol</div>
        <div class="steps-header"></div>
      </div>
      <div id="sequencerGrid" class="sequencer-grid"></div>
    </div>

    <div class="controls-row controls-row-volume controls-row-volume-end">
      <div class="master-volume-control">
        <label for="masterVolume" data-i18n="masterVolume">Master Vol</label>
        <input type="range" id="masterVolume" min="0" max="100" value="100">
      </div>
      <div class="dynamics-control">
        <label for="accentLevel" data-i18n="accentLevel">Accent</label>
        <input type="range" id="accentLevel" min="0" max="100" value="100">
      </div>
      <div class="swing-control">
        <label for="swingAmount" data-i18n="swingAmount">Swing</label>
        <input type="range" id="swingAmount" min="0" max="100" value="0">
      </div>
    </div>
  </div>

  <!-- Modal Äiá»‡u cá»§a tÃ´i -->
  <div id="myPresetsModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="myPresetsTitle">Äiá»‡u cá»§a tÃ´i</h2>
      <div class="my-presets-tabs" role="tablist">
        <button type="button" id="tabMine" class="my-preset-tab active" role="tab" aria-selected="true">
          <span class="tab-icon" aria-hidden="true">ğŸ‘¤</span><span class="tab-text" data-i18n="tabMine">Cá»§a tÃ´i</span>
        </button>
        <button type="button" id="tabFavourite" class="my-preset-tab" role="tab" aria-selected="false">
          <span class="tab-icon" aria-hidden="true">â­</span><span class="tab-text" data-i18n="tabFavourite">Favourite</span>
        </button>
        <button type="button" id="tabShared" class="my-preset-tab" role="tab" aria-selected="false">
          <span class="tab-icon" aria-hidden="true">ğŸ‘¥</span><span class="tab-text" data-i18n="tabShared">Share</span>
        </button>
      </div>
      <input type="text" id="myPresetsSearch" class="rhythm-search" data-i18n-placeholder="searchPresets" placeholder="TÃ¬m Ä‘iá»‡u...">
      <div class="my-presets-toolbar">
        <div class="my-presets-sort-icons" id="myPresetsSortIcons">
          <button type="button" class="btn btn-icon sort-icon" data-order="name-asc" data-i18n-title="sortNameAsc">Aâ†‘</button>
          <button type="button" class="btn btn-icon sort-icon" data-order="name-desc" data-i18n-title="sortNameDesc">Zâ†“</button>
          <button type="button" class="btn btn-icon sort-icon" data-order="updated-desc" data-i18n-title="sortNewestTitle" data-i18n="sortNewest">Má»›i</button>
          <button type="button" class="btn btn-icon sort-icon" data-order="updated-asc" data-i18n-title="sortOldestTitle" data-i18n="sortOldest">CÅ©</button>
        </div>
      </div>
      <div id="myPresetsList" class="rhythm-presets"></div>
      <div class="modal-actions modal-actions-end">
        <span id="myPresetsAddShareActions" style="display:inline-flex;gap:0.5rem">
          <button id="addMyPresetBtn" class="btn btn-success" data-i18n="add">ThÃªm</button>
          <button id="sharePresetsBtn" class="btn btn-info" disabled data-i18n-title="shareSelectPresets" data-i18n="share">Share</button>
        </span>
        <button id="closeMyPresets" class="btn btn-close" data-i18n="close">ÄÃ³ng</button>
      </div>
    </div>
  </div>

  <!-- Modal Share Ä‘iá»‡u -->
  <div id="sharePresetsModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="shareTitle">Share Ä‘iá»‡u</h2>
      <div class="share-mode-options">
        <label class="share-mode-option">
          <input type="radio" name="shareMode" value="all" checked>
          <span data-i18n="shareAllUsers">Táº¥t cáº£ user</span>
        </label>
        <label class="share-mode-option">
          <input type="radio" name="shareMode" value="user">
          <span data-i18n="shareSelectUser">Chá»n user</span>
        </label>
      </div>
      <div id="shareUserSection" class="share-user-section hidden">
        <input type="text" id="shareUserSearch" class="rhythm-search" data-i18n-placeholder="searchUser" placeholder="TÃ¬m user theo email hoáº·c tÃªn...">
        <div id="shareUserResults" class="share-user-results"></div>
      </div>
      <div class="modal-actions">
        <button id="shareConfirmBtn" class="btn btn-success" data-i18n="share">Share</button>
        <button id="shareCancelBtn" class="btn btn-close" data-i18n="cancel">Há»§y</button>
      </div>
    </div>
  </div>

  <!-- Modal Dialog (alert, confirm, prompt) -->
  <div id="dialogModal" class="modal">
    <div class="modal-content modal-dialog">
      <h2 id="dialogTitle" class="dialog-title"></h2>
      <p id="dialogMessage" class="dialog-message"></p>
      <input type="text" id="dialogInput" class="dialog-input hidden" placeholder="" autocomplete="off">
      <div class="modal-actions dialog-actions" id="dialogActions"></div>
    </div>
  </div>

  <!-- Modal Nhá»‹p Ä‘iá»‡u -->
  <div id="rhythmModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="rhythmTitle">Chá»n nhá»‹p Ä‘iá»‡u máº«u</h2>
      <input type="text" id="rhythmSearch" class="rhythm-search" data-i18n-placeholder="searchRhythm" placeholder="TÃ¬m nhá»‹p Ä‘iá»‡u...">
      <div id="rhythmPresets" class="rhythm-presets"></div>
      <div class="modal-actions">
        <button id="closeRhythm" class="btn btn-close" data-i18n="close">ÄÃ³ng</button>
      </div>
    </div>
  </div>

  <!-- Tuplet popover (right-click step) -->
  <div id="tupletPopover" class="tuplet-popover" aria-hidden="true">
    <div class="tuplet-popover-content">
      <h3 class="tuplet-popover-title" data-i18n="tupletTitle">Tuplet cho step</h3>
      <div class="tuplet-type-row">
        <label><input type="radio" name="tupletType" value="0" checked> <span data-i18n="tupletNormal">BÃ¬nh thÆ°á»ng</span></label>
        <label><input type="radio" name="tupletType" value="2"> <span data-i18n="tuplet2">LiÃªn 2</span></label>
        <label><input type="radio" name="tupletType" value="3"> <span data-i18n="tuplet3">LiÃªn 3</span></label>
        <label><input type="radio" name="tupletType" value="4"> <span data-i18n="tuplet4">LiÃªn 4</span></label>
        <label class="tuplet-mobile-hidden"><input type="radio" name="tupletType" value="5"> <span data-i18n="tuplet5">LiÃªn 5</span></label>
        <label class="tuplet-mobile-hidden"><input type="radio" name="tupletType" value="6"> <span data-i18n="tuplet6">LiÃªn 6</span></label>
      </div>
      <div id="tupletHitsRow" class="tuplet-hits-row hidden">
        <span data-i18n="tupletHits">Hits:</span>
        <div id="tupletHits" class="tuplet-hits"></div>
      </div>
      <div class="tuplet-popover-actions">
        <button id="tupletApply" class="btn btn-save btn-sm" data-i18n="tupletApply">Ãp dá»¥ng</button>
        <button id="tupletClear" class="btn btn-ghost btn-sm" data-i18n="tupletClear">XoÃ¡ tuplet</button>
      </div>
    </div>
  </div>

  <!-- Modal Chain -->
  <div id="chainModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="chainTitle">Chain Ä‘iá»‡u</h2>
      <p class="chain-description" data-i18n="chainDescription">Chá»n thá»© tá»± preset Ä‘á»ƒ phÃ¡t liÃªn tiáº¿p. Má»—i preset phÃ¡t 4 Ã´ nhá»‹p.</p>
      <div class="chain-add-row">
        <select id="chainPresetSelect" class="rhythm-search chain-select">
          <option value="">-- Chá»n preset --</option>
        </select>
        <div class="chain-measures-input-wrap">
          <label for="chainMeasuresInput" data-i18n="chainMeasures">Ã” nhá»‹p</label>
          <input type="number" id="chainMeasuresInput" min="1" max="64" value="4" title="Sá»‘ Ã´ nhá»‹p phÃ¡t">
        </div>
        <button id="chainAddPreset" class="btn btn-success btn-sm" data-i18n="chainAdd">ThÃªm preset</button>
      </div>
      <div id="chainList" class="chain-list"></div>
      <div class="chain-toolbar">
        <button id="chainClear" class="btn btn-ghost btn-sm" data-i18n="chainClear">XoÃ¡ chain</button>
      </div>
      <div class="modal-actions">
        <button id="closeChain" class="btn btn-close" data-i18n="close">ÄÃ³ng</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script src="i18n.js"></script>
  <script src="app.js"></script>
</body>
</html>
