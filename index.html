<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Tr·ªëng ƒëi·ªán t·ª≠ online - Drum Machine</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="header-row">
      <h1 class="title">Tri's Drum Player</h1>
      <div class="header-actions">
        <div class="lang-switcher">
          <button type="button" class="btn btn-ghost btn-sm lang-btn" data-lang="vi" title="Ti·∫øng Vi·ªát">VI</button>
          <button type="button" class="btn btn-ghost btn-sm lang-btn" data-lang="en" title="English">EN</button>
        </div>
        <div id="authArea" class="auth-area">
          <div id="loginPrompt" class="login-prompt">
            <button id="loginBtn" class="btn btn-ghost" data-i18n="loginGoogle">ƒêƒÉng nh·∫≠p Google</button>
            <span class="login-tooltip" id="loginTooltip" data-i18n="loginTooltip">ƒêƒÉng nh·∫≠p ƒë·ªÉ c√≥ th·ªÉ t·∫°o ƒëi·ªáu tr·ªëng cho ri√™ng m√¨nh v√† chia s·∫ª v·ªõi ng∆∞·ªùi kh√°c</span>
          </div>
          <div id="userArea" class="user-area" style="display:none">
            <img id="userAvatar" class="user-avatar" alt="">
            <span id="userName" class="user-name"></span>
            <button id="logoutBtn" class="btn btn-ghost btn-sm" data-i18n="logout">ƒêƒÉng xu·∫•t</button>
          </div>
        </div>
      </div>
    </div>

    <div class="controls">
      <div class="controls-row controls-row-primary">
        <button id="playBtn" class="btn btn-play" aria-label="Ph√°t">
          <span class="play-icon">‚ñ∂</span>
        </button>
        <div class="tempo-control">
          <label for="bpm" data-i18n="bpm">BPM</label>
          <input type="number" id="bpm" value="90" min="40" max="240" step="1">
        </div>
        <div class="time-signature-control">
          <label for="timeSignature" data-i18n="timeSig">Nh·ªãp</label>
          <select id="timeSignature">
            <option value="4/4">4/4</option>
            <option value="3/4">3/4</option>
            <option value="12/8">12/8</option>
          </select>
        </div>
        <label class="metronome-option">
          <input type="checkbox" id="metronomeCheck" aria-label="Click">
          <span data-i18n="metronome">Metronome</span>
        </label>
        <div class="sound-control">
          <label for="soundSet" data-i18n="soundSet">B·ªô ti·∫øng</label>
          <select id="soundSet">
            <option value="standard">standard</option>
          </select>
        </div>
      </div>
      <div class="controls-row controls-row-actions">
        <button id="rhythmBtn" class="btn btn-browse" data-i18n="rhythmPresets">ƒêi·ªáu m·∫´u</button>
        <button id="myPresetsBtn" class="btn btn-info" style="display:none" data-i18n="myPresets">ƒêi·ªáu c·ªßa t√¥i</button>
        <button id="clearBtn" class="btn btn-danger" data-i18n="clear">Xo√°</button>
      </div>
      <div class="controls-row controls-row-copy">
        <button id="copyUrlBtn" class="btn btn-success btn-copy" data-i18n="copyLink">Sao ch√©p link share</button>
        <button id="saveRhythmBtn" class="btn btn-download" data-i18n="download">T·∫£i xu·ªëng</button>
        <span id="copyStatus" class="copy-status"></span>
      </div>
    </div>

    <div class="current-preset-section">
      <span id="currentPresetName" class="current-preset-name" data-i18n-empty="currentPresetEmpty" data-i18n-before="currentPresetLabel"></span>
    </div>

    <div class="sequencer">
      <div class="grid-header">
        <div class="instrument-label empty"></div>
        <div class="volume-label" data-i18n="volume">Vol</div>
        <div class="steps-header"></div>
      </div>
      <div id="sequencerGrid" class="sequencer-grid"></div>
    </div>
  </div>

  <!-- Modal ƒêi·ªáu c·ªßa t√¥i -->
  <div id="myPresetsModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="myPresetsTitle">ƒêi·ªáu c·ªßa t√¥i</h2>
      <div class="my-presets-tabs" role="tablist">
        <button type="button" id="tabMine" class="my-preset-tab active" role="tab" aria-selected="true">
          <span class="tab-icon" aria-hidden="true">üë§</span><span class="tab-text" data-i18n="tabMine">C·ªßa t√¥i</span>
        </button>
        <button type="button" id="tabFavourite" class="my-preset-tab" role="tab" aria-selected="false">
          <span class="tab-icon" aria-hidden="true">‚≠ê</span><span class="tab-text" data-i18n="tabFavourite">Favourite</span>
        </button>
        <button type="button" id="tabShared" class="my-preset-tab" role="tab" aria-selected="false">
          <span class="tab-icon" aria-hidden="true">üë•</span><span class="tab-text" data-i18n="tabShared">Share</span>
        </button>
      </div>
      <input type="text" id="myPresetsSearch" class="rhythm-search" data-i18n-placeholder="searchPresets" placeholder="T√¨m ƒëi·ªáu...">
      <div class="my-presets-toolbar">
        <div class="my-presets-sort-icons" id="myPresetsSortIcons">
          <button type="button" class="btn btn-icon sort-icon" data-order="name-asc" data-i18n-title="sortNameAsc">A‚Üë</button>
          <button type="button" class="btn btn-icon sort-icon" data-order="name-desc" data-i18n-title="sortNameDesc">Z‚Üì</button>
          <button type="button" class="btn btn-icon sort-icon" data-order="updated-desc" data-i18n-title="sortNewestTitle" data-i18n="sortNewest">M·ªõi</button>
          <button type="button" class="btn btn-icon sort-icon" data-order="updated-asc" data-i18n-title="sortOldestTitle" data-i18n="sortOldest">C≈©</button>
        </div>
      </div>
      <div class="modal-actions" style="margin-bottom:1rem">
        <button id="addMyPresetBtn" class="btn btn-success" data-i18n="add">Th√™m</button>
        <button id="sharePresetsBtn" class="btn btn-info" disabled data-i18n-title="shareSelectPresets" data-i18n="share">Share</button>
      </div>
      <div id="myPresetsList" class="rhythm-presets"></div>
      <div class="modal-actions modal-actions-end">
        <button id="closeMyPresets" class="btn btn-close" data-i18n="close">ƒê√≥ng</button>
      </div>
    </div>
  </div>

  <!-- Modal Share ƒëi·ªáu -->
  <div id="sharePresetsModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="shareTitle">Share ƒëi·ªáu</h2>
      <div class="share-mode-options">
        <label class="share-mode-option">
          <input type="radio" name="shareMode" value="all" checked>
          <span data-i18n="shareAllUsers">T·∫•t c·∫£ user</span>
        </label>
        <label class="share-mode-option">
          <input type="radio" name="shareMode" value="user">
          <span data-i18n="shareSelectUser">Ch·ªçn user</span>
        </label>
      </div>
      <div id="shareUserSection" class="share-user-section hidden">
        <input type="text" id="shareUserSearch" class="rhythm-search" data-i18n-placeholder="searchUser" placeholder="T√¨m user theo email ho·∫∑c t√™n...">
        <div id="shareUserResults" class="share-user-results"></div>
      </div>
      <div class="modal-actions">
        <button id="shareConfirmBtn" class="btn btn-success" data-i18n="share">Share</button>
        <button id="shareCancelBtn" class="btn btn-close" data-i18n="cancel">H·ªßy</button>
      </div>
    </div>
  </div>

  <!-- Modal Dialog (alert, confirm, prompt) -->
  <div id="dialogModal" class="modal">
    <div class="modal-content modal-dialog">
      <h2 id="dialogTitle" class="dialog-title"></h2>
      <p id="dialogMessage" class="dialog-message"></p>
      <input type="text" id="dialogInput" class="dialog-input hidden" placeholder="" autocomplete="off">
      <div class="modal-actions dialog-actions" id="dialogActions"></div>
    </div>
  </div>

  <!-- Modal Nh·ªãp ƒëi·ªáu -->
  <div id="rhythmModal" class="modal">
    <div class="modal-content modal-rhythm">
      <h2 data-i18n="rhythmTitle">Ch·ªçn nh·ªãp ƒëi·ªáu m·∫´u</h2>
      <input type="text" id="rhythmSearch" class="rhythm-search" data-i18n-placeholder="searchRhythm" placeholder="T√¨m nh·ªãp ƒëi·ªáu...">
      <div id="rhythmPresets" class="rhythm-presets"></div>
      <div class="modal-actions">
        <button id="closeRhythm" class="btn btn-close" data-i18n="close">ƒê√≥ng</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script src="i18n.js"></script>
  <script src="app.js"></script>
</body>
</html>
